(function(e){var t={bgColor:"#ccc",fgColor:"",size:160,donutwidth:40,textsize:16};var n={init:function(r){var i=true;if(typeof r=="object"){this.donutchartsettings=e.extend({},t,r);if(r["size"]&&!r["donutwidth"])this.donutchartsettings["donutwidth"]=r["size"]/4;if(r["size"]&&!r["textsize"])this.donutchartsettings["textsize"]=r["size"]/10}else{if(typeof this.donutchartsettings=="object")i=false;else this.donutchartsettings=t}if(i){e(this).css("position","relative");e(this).css("width",this.donutchartsettings.size+"px");e(this).css("height",this.donutchartsettings.size+"px");e(this).html("<canvas width='"+this.donutchartsettings.size+"' height='"+this.donutchartsettings.size+"'></canvas><div style='position:absolute;top:0;left:0;line-height:"+this.donutchartsettings.size+"px;text-align:center;width:"+this.donutchartsettings.size+"px;font-size:"+this.donutchartsettings.textsize+"px;'>"+e(this).html()+"<span></span></div>");var s=e("canvas",this).get(0);if(typeof G_vmlCanvasManager!="undefined")G_vmlCanvasManager.initElement(s);var o=s.getContext("2d");n.drawBg.call(o,this.donutchartsettings)}},drawBg:function(e){this.clearRect(0,0,e.size,e.size);this.beginPath();this.fillStyle=e.bgColor;this.arc(e.size/2,e.size/2,e.size/2,0,2*Math.PI,false);this.arc(e.size/2,e.size/2,e.size/2-e.donutwidth,0,2*Math.PI,true);this.fill()},drawFg:function(e,t){var n=t/100*360;var r=Math.PI*-90/180;var i=Math.PI*(-90+n)/180;this.beginPath();this.fillStyle=e.fgColor;this.arc(e.size/2,e.size/2,e.size/2,r,i,false);this.arc(e.size/2,e.size/2,e.size/2-e.donutwidth,i,r,true);this.fill()}};e.fn.donutchart=function(t){return this.each(function(){n.init.call(this,t);if(t=="animate"){var r=e(this).attr("data-percent");var i=e(this).children("canvas").get(0);var s=e(this).find("span");var o=this.donutchartsettings;if(i.getContext){var u=i.getContext("2d");var a=0;function f(){a++;n.drawBg.call(u,o);n.drawFg.apply(u,[o,a]);s.text(a+"%");if(a>=r)clearInterval(l)}var l=setInterval(f,20)}}})}})(jQuery);